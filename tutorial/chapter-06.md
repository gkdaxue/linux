# Vim编辑器
在 Linux 系统中, 大部分的配置文件都是以 Ascll 的存文本形式存在, 那么编辑这些配置文件就需要用到我们之前说的 nano 之类的编辑软件, 但是我们为什么一定要学习 Vim 编辑器呢?
> 1. 所有的 Linux 系统都会内置 vi 文本编辑器, 其他的编辑器不一定存在
> 2. 很多的软件的编辑接口也会调用 vi 来编辑配置文件(crontab, visudo 等)
> 3. Vim 具有程序编辑的能力, 程序简单, 编辑速度相当快.

vim 共分为 3 种模式, 分别是 命令模式(Command mode), 输入模式(Insert mode) 和 末行模式(Last line mode), 默认进入 vim 为 命令模式.
> 命令模式 : 控制光标上下左右移动，可对文本进行复制、粘贴、删除和查找等工作(默认)
>
> 输入模式 : 进行正常的文本输入操作, 也叫编辑模式
> 
> 末行模式 : 保存或退出文档，以及设置编辑环境

![vim_three_mode](https://github.com/gkdaxue/linux/raw/master/image/chapter_A6_0001.png)

在每次运行Vim编辑器时，默认进入命令模式，此时需要先切换到输入模式后再进行文档编写工作，而每次在编写完文档后需要先返回命令模式，然后再进入末行模式，执行文档的保存或退出操作。在Vim中，无法直接从输入模式切换到末行模式。有的时候会看到 vi , 那么 vi 和 vim 什么关系呢? vim 可以看做 vi 的升级版本功能更强大. 
> vim FILE_NAME

```bash
## 默认进入命令模式
[root@localhost ~]# vim vim_test.txt
▌   <== 光标在这里跳动
~
~   <== ~ 表示没有任何东西, 所以显示 ~
~
~                                                                           
"vim_test.txt"  [New File]                                  0,0-1         All
   文件名        这是一个新建的文件

## 然后按下 i o a 任何一个按键, 进入输入模式
gkdaxue  <== 光标在这里跳动, 然后输入 gkdaxue
~
~
~                                                                                                                  
-- INSERT --                                               0,1           All
   表明现在是编辑模式

## 那么如何保存呢? 先按 ESC 退回到命令模式, 发现最下边的 INSET 那行不见了
## 然后我们按下 Shift + " : 键所在的位置". 输入 : 变成如下所示
gkdaxue
~
~
~                                                                         
:  <== 这是我们在命令模式下输入的 : 显示在最后一行, 进入了末行模式, 我们可以在里面输入内容

## 接下来我们在末行模式中输入 wq! ,显示如下, 输入完成敲回车, 在查看文件内容
:wq!
[root@localhost ~]# cat vim_test.txt 
gkdaxue
[root@localhost ~]# vim vim_test.txt
gkdaxue
~
~
~                                                                         
"vim_test.txt" 1L, 8C                                      1,1           All
  文件名       因为不是新创建的文件, 所以没有 New File 
1L : 有1行
8C : 8个字符

## 经过上面简单的尝试, 我们已经学会了最简单的 Vim 操作. 接下来自行尝试修改文件内容并保存.
```
![use_vim](https://github.com/gkdaxue/linux/raw/master/image/chapter_A6_0002_use_vim.gif)

## 命令模式常用按键
Num 表示数字的意思, 不是单词, 也不是字符串.

| 按键 | 作用 |
| ---- | ---- |
| h \| ←  | 光标向左移动一个字符 |
| j \| ↓ | 光标向下移动一个字符 |
| k \| ↑ | 光标向上移动一个字符 |
| l \| → | 光标向右移动一个字符 |
| <br /> | 也可以和数字连用, 比如 30j 表示向下移动30 行 |
| ctrl + f \| Page Down | 屏幕向下移动一页 |
| ctrl + b \| Page Up | 屏幕向上移动一页 |
| ctrl + d | 屏幕向下移动半页 |
| ctrl + u | 屏幕向上移动半页 |
| Num + 空格 | 比如 30 + 空格, 表示向右移动30个字符 |
| H | 光标移动到此屏幕上第一行的第一个字符 |
| M | 光标移动到此屏幕中央那一行的第一个字符 |
| L | 光标移动到此屏幕上最后一行的第一个字符 |
| 0 \| Home键 | 移动到此行的第一个字符上 |
| $ \| End键 | 移动到此行的最后一个字符上 |
| gg | 跳转到此文件的第一行 |
| G | 移动到此文件的最后一行 |
| NumG | 如20G, 表示跳转到 20 行 |
| Num + 回车 | 如 10 + 回车, 表示光标向下移动 10 行 |
| x | 向后删除一个字符 |
| X | 向前删除一个字符 |
| Numx| 向后删除 Num 个字符 |
| dd | 删除光标所在的一整行 |
| Numdd | 删除光标所在的向下 Num 行,如 20dd |
| d1G | 删除光标所在行到第一行的所有内容 |
| dG | 删除光标所在行到最后一行的所有内容 |
| d0 | 数字0, 表示删除光标所在位置到该行行首所有字符 |
| d$ | 表示删除光标所在位置到该行行尾所有字符 |
| yy | 复制光标所在的行 |
| Numyy | 复制光标所在的向下 Num 行, 如 20yy |
| y1G | 复制光标所在行到第一行的所有数据 |
| yG | 复制光标所在行到最后一样的所有数据 |
| y0 | 复制光标所在位置到该行行首的所有数据 | 
| y$ | 复制光标所在位置到该行行尾的所有数据 |
| p | 将复制的数据粘贴在光标的下一行 |
| P | 将复制的数据粘贴在光标的上一行 |
| u | 还原上一步的操作 |
| . | 重复前一个操作 |

**以下为 命令模式 进入到编辑模式的按键说明 :**

| 按键 | 作用 |
| ---- | ---- |
| i | 当前光标所在处插入 |
| I | 大写(i), 光标所在行的第一个非空格处插入 |
| a | 光标所在的下一个字符处开始插入 |
| A | 光标所在行的最后一个字符处插入 |
| o | 光标所在行的插入新的一行 |
| O | 大小字母 o, 光标所在行的上一行插入新的一行 |

## 末行模式常用按键 
想要进入末行模式, 可以按 :  /   ?  这三个中的任意一个, 每个都有不同的作用.

| 按键 | 作用 |
| ---- | ---- |
| /word | 往下寻找一个叫做 word 的字符串 |
| ?word | 往上寻找一个叫做 word 的字符串 |
| <br /> | n 重复前一个查找的工作 |
| <br /> | N 反向执行前一个查找的操作 | 
| :Line1,Line2s/word1/word2/ | 从 Line1 到 Line2 行第一个 word1 字符替换为 word2 |
| :Line1,Line2s/word1/word2/g | 将 Line1 到 Line2 行中所有的 word1 字符 替换为 word2 |
| :Line1,Line2s/word1/word2/gc | 将 Line1 到 Line2 行中所有的 word1 字符 替换为 word2 且在替换前给用户确认是否替换 |
| :w | 保存数据 |
| :w! | 强制保存数据(能不能写入要看用户对该文件的权限) |
| :q | 退出 vim |
| :q! | 强制退出 vim, 不保存已经修改的数据 |
| :wq | 保存并退出 |
| :wq! | 强制保存并退出 |
| ZZ | 文件没有改动,则退出, 如果文件被改动, 则保存后退出 |
| :w FILE_NAME | 将编辑的数据另存为 FILE_NAME 文件 |
| :r FILE_NAME | 读取 FILE_NAME 的内容并追加到光标所在行的后面 |
| :Num1,Num2 w FILE_NAME | 将 Num1 到 Num2 行的内容保存为 FILE_NAME 文件 |
| :! Command | 暂时离开 Vim 环境到命令行模式下执行 Command 命令并显示结果 |
| :set nu | 显示行号 |
| :set nonu | 不显示行号 |

## 实例
```bash
## 测试数据
[root@localhost ~]# cp /etc/man.config .



```




# 正则表达式



# shell script

| 符号 | 作用 |
| ---- | ---- |
| com1 && com2 | 若 cmd1 执行完毕且正确执行($?=0), 则开始执行 cmd2 <br> 若 cmd1 执行完毕且为错误($?≠0), 则 cmd2 不执行 |
| com1 \|\| com2 | 若 cmd1 执行完毕且正确执行($?=0), 则不执行 cmd2 <br> 若 cmd1 执行完毕且为错误($?≠0), 则执行 cmd2  |

```bash
## 没有 /tmp/abc
[root@localhost ~]# ls /tmp/abc && touch /tmp/abc/gkdaxue
ls: cannot access /tmp/abc: No such file or directory

```

